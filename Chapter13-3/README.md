# 컴퓨터 보안

> 컴퓨터는 어떻게 데이터를 안전하게 지키는가

<br>

보안은 어렵고 cryptography 요소들은 이상한 수학과 관련이 많으며 엄청 중요하다.

보안과 프라이버시는 서로 엮여 있어서 내 가족과 자산을 지키기 위해서는 내 정보가 안전하게 보호되어야 한다.

<br>
<br>
<br>

---
<!-- ## 보안과 프라이버시 개요

사물과 사물의 연결 기술이 쉽게 이뤄지고 있는 지금, 내 장치에 접근해서 정보를 쉽게 탈취하고 악용가능

아래 세 가지 유형의 신뢰 위반을 고려
- 의도적
  - 컴퓨터 완제품을 샀는데 거기에 멀웨어를 심어서 광고가 항상 뜨게 함
- 무능
  - 보호되고 있지 않은 연결 -> 나쁜 사람이 악용
  - ???: 죄송한데 와이파이 비밀번호 왜 걸으셨어요?
- 부정직
  - 미국이라고 해서 항상 믿을 수 없음
  - 미국 국가안보국(NSA)도 의도적으로 암호 표준을 약화시켜서 자기들이 유리한 상황에 있도록 했었음
  - DES도 마찬가지

물리적
- 총들고 협박하면 답 없음

통신 보안
- 인증
- 중간자 공격
- 암호화/복호화

인터넷
- Dos, DDoS
- 프록시
- 마이크로소프트 배짱
  - 버그를 수정하기 위해 새로운 버전을 내놓지 않겠다.
  - 안전하지 못해서 IoT 시장에선...

소셜
- 내 정보를 얻기 쉬워짐
  - 제발 알아달라고 함

국가 안보
- 정부가 국민을 지켜야 한다는 의무가 국민의 권리보다 더 강한가
- 정부가 옳은가? 국민을 위해 일하는가
- DES 쓰세요 -> 감청


인증과 권한 부여, 자격 증명과 2단계 인증 등

데이터 접근을 더욱 복잡하고 어렵게 만들어서 사용하기도 힘들어짐

2FA를 대체하는 기술이 나오면 좋겠다 -->

<br>
<br>
<br>

--- 
<!-- ## 크립토그래피

스테가노그래피
- 내용 속에 또 다른 내용을 숨긴다
- 이미지에도 문자를 숨긴다

치환 암호
- 평문 -> 암호화 -> 복호화
- 대칭 코드 (알파벳을 3개씩 미루는 등)

전치 암호
- 스키테일 (글자를 뒤섰는다)
- 평문을 더 못알아보게 만듬

더 복잡하게
- 위 방식들은 대칭 코드나 방식을 알면 쉽게 복호화 가능

일회용 패드
- 복호화 할 수 있는 키를 서로 공유, 해당 키를 사용 후 바꿈 (반복)

공개키 암호
- 서로 연관된 키 쌍을 사용
- 평문 -> 공개키로 암호화 -> 개인이 가진 비밀키로 복호화
- 공개키는 트랩도어 함수에 의존
  - 트랩도어는 비밀키를 모르면 복호화가 상당히 어렵게 만들어짐
- 디피-헬먼 키 교환
  - 이 방식으로 공개키를 만듬
- 트랩도어 만들기 어려움
  - RSA가 RSA 만들어줌
    - 여기에도 백도어 심음

전방향 안전성
- 대칭 키를 알면 전체 메시지를 알 수 있다.
- 각 메시지별로 키를 생성

해시 함수
- 단방향
- SHA-1
  - 충돌에 안전 

디지털 서명
- 인증
- 부인방지

공개키 인프라
- 신뢰할 수 있는 제 3자로부터 인증서를 받음

블록체인
- 해시를 변경하면 완전 다른 데이터가 됨

패스워드 관리
- 잘하자 -->

<br>
<br>
<br>

---
## 보안을 위한 소프트웨어 예방 조치

<br>

크립토그래피 전문가나 보안 마법사가 될 필요는 없다.

많은 사례를 통해 나온 답안지를 적용하자.

> [헨리 스펜서의 C 프로그래머 십계명](https://www.lysator.liu.se/c/ten-commandments.html)

<br>

### 1. 올바른 대상을 보호하라

모든 대상을 보호하고 싶겠지만 모든 경우에 대해서 옳은건 아니다.
```
ex) 리그 오브 레전드의 자유게시판을 보기 위해서 로그인이 필수라면?

PC방에서 로그인해서 자유게시판을 보다가 시간 연장을 위해 자리를 비움
--> 옆자리에 있던 나쁜 사람이 컴퓨터에 접근, 회원 탈퇴를 해버림
```

<br>

### 2. 로직은 세 번 체크하라

```
내가 짠 로직을 다른 사람들과 같이 큰 소리로 읽어보자
```

<br>

### 3. 오류를 검사하라

```
시스템 콜이나 라이브러리 함수를 호출했을때 어떤 오류 코드를 반환한다면 무시하지 말 것
```

<br>

### 4. 공격 표면을 최소화하라

```
모든 소프트웨어가 복잡하기 때문에 버그가 있을 수밖에 없다고 가정해야만 한다.

많은 연구자들은 형식적 방법론을 만들기 위해 노력했으나 지금도 해결하지 못했다.

새로운 기능을 추가할 때마다 새로운 공격 표면이 추가된다.

감청하기 위한 백도어를 설치하는 경우 반대로 나쁜 사람들이 공격할 수 있는 수단을 제공하는 것

```
[Protocol Failure in the Escrowed Encryption Standard](https://www.mattblaze.org/papers/eesproto.pdf)

<br>

### 5. 경계 내부에 머물러라

메모리 경계, 타이밍 경계

```
버퍼 오버플로는 쉽게 악용할 수 있는 버그의 예

메모리 구조를 악용해서 다른 변수에 값을 넣을 수 있다.


       메모리                     buffer에 yyy입력 하는 경우
___________________
|    buffer[0]    |             <- y
-------------------
|    buffer[1]    |             <- y
-------------------
| launch_missiles |             <- y     // 의도하지 않음
-------------------

```
[버퍼 오버플로우 공격](https://cosyp.tistory.com/206)

<br>

### 6. 좋은 난수를 생성하기는 힘들다

```
논리 회로로는 진짜 난수를 만들 수 없기 때문에 의사 난수가 사용된다.

의사 난수는 선형 피드백 시프트 레지스터로 생성하는데 이전 출력이 입력으로 들어오기 때문에

최근 값을 알면 다음 난수를 알 수 있다.

(seed라는 최초의 숫자로 레지스터를 설정한다.)

요즘은 엔트로피를 수집해서 완전한 난수를 생성하려는 연구를 하고 있다.
```
- [의사 난수 생성기](https://ko.wikipedia.org/wiki/%EC%84%A0%ED%98%95_%EB%90%98%EB%A8%B9%EC%9E%84_%EC%8B%9C%ED%94%84%ED%8A%B8_%EB%A0%88%EC%A7%80%EC%8A%A4%ED%84%B0)
- [엔트로피](https://youtu.be/qvBi0Vr5mFA?t=2817)

<br>

### 7. 네 코드를 알라

```
서드파티 코드가 안전한가? 얼마나 이해하고 쓰고 있는가

방대한 라이브러리의 기능을 모두 사용하고 있는가

오픈SSL 첫번째 이슈
'하트블리드(HeartBleed)' 취약점이란?

HeartBleed란 OpenSSL 1.0.1 버전에서 발견된 매우 위험한 취약점 입니다. OpenSSL을 구성하고 있는 TLS/DTLS의 HeartBeat 확장규격에서 발견된 취약점으로, 해당 취약점을 이용하면 서버와 클라이언트 사이에 주고받는 정보들을 탈취할 수 있습니다.

* OpenSSL은 정해진 규격의 네트워크 보안 프로토콜을 범용 라이브러리로 구현하기 위한 목적으로 만들어졌으며, SSL이나 TLS를 이용한 암호화를 구현할 수 있습니다. 강력한 암호화 기능을 제공하기 때문에, 보안이 중요한 대형 포털서비스, 이메일 서비스, 금융권 등에서 데이터 통신 시 OpenSSL을 사용하고 있습니다.
```
- [Log4j 문제](https://developer-ping9.tistory.com/256)
- [오픈SSL 두번째 이슈](https://zdnet.co.kr/view/?no=20221031110117)

<br>

### 8. 극단적인 영리함은 여러분의 적이다

```
라이브러리에 의존을 하다가 사용중인 기능이 제거된다면?
```

<br>

### 9. 눈에 보이는 것을 이해하라

<br>

- 내가 만든 프로그램의 데이터를 누가 볼 수 있는가?
- 공격자가 장치에서 메모리를 빼내서 직접 접근하면 보호를 우회해서 데이터를 얻을 수 있는가?
  - 버닝썬

```
사이드 채널 공격
- 암호 검사 방식
- ATM기의 키패드를 보고 있는 카메라
- 전자기파 방사
  - 반 에크 프리킹
```

- 반 에크 프리킹
  - 도청 대상 장치로부터의 데이터 이동이나 신호에 의하여 생성되는 전자파를 모니터링해서 원격으로 통신 신호나 데이터를 특별 장치를 통하여 도청하는 것. 텔레비전 수상기나 프린터, 기타 전자 장치에서도 전자파 방사 현상이 일어난다.

<br>

### 10. 과다수집하지 마라

```
보호해야 할 대상을 만들지 말자
```

<br>

### 11. 모아두지 마라

```
사용이 끝난 민감한 정보는 깨끗이 제거
```

<br>

### 12. 동적 메모리 할당은 여러분의 친구가 아니다

```
메모리 할당 방식을 잘 이해하고 사용하자
```

<br>

### 13. 가비지 컬렉션도 여러분의 친구가 아니다

```
메모리 관리를 직접 하는 경우 민감한 데이터가 제대로 비워졌는지 제대로 확인이 필요
가비지 컬렉션을 사용하는 경우는 민감한 정보가 지워지길 기도해야 한다
```

프로그래밍 언어 뿐만 아니라 플래시 메모리에도 이런 문제가 있다. (SSD)

데이터를 기록할 때 예전 정보를 덮어쓴다는 보장이 없다.

<br>

### 14. 코드 역할을 하는 데이터

```
eval 함수는 문자열을 프로그램처럼 취급해서 실행이 될 수 있음

-> 스크립트를 실행 시킬 수 있다.

SQL 인젝션 방식도 조심해야함 -> PHP, JSP의 경우
```
[웹 개발을 위해 꼭 알아야하는 보안 공격](https://kciter.so/posts/basic-web-hacking)